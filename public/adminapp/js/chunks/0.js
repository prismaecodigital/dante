(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{"0/wV":function(t,e,a){(t.exports=a("I1BE")(!1)).push([t.i,".pic-image[data-v-67f80fa2],.pic-preview[data-v-67f80fa2]{width:120px;position:relative}.pic-image[data-v-67f80fa2]{height:120px}.pic-image img[data-v-67f80fa2]{width:100%;height:100%;-o-object-fit:cover;object-fit:cover}.flex-gap[data-v-67f80fa2]{gap:2em}.file-name[data-v-67f80fa2]{font-weight:500;font-size:13px;color:#202124;text-overflow:ellipsis}.file-size[data-v-67f80fa2]{font-weight:400;color:rgba(0,0,0,.54);font-size:13px}.vue-dropzone .attachment-list-container *[data-v-67f80fa2]{cursor:auto}.vue-dropzone .attachment-list-container[data-v-67f80fa2]{cursor:default}.vue-dropzone .pic-preview a img[data-v-67f80fa2],.vue-dropzone .pic-preview button.btn[data-v-67f80fa2],.vue-dropzone .pic-preview button.btn i[data-v-67f80fa2]{cursor:pointer}.file-status[data-v-67f80fa2]{font-size:13px;font-weight:400;line-height:15px}button[data-v-67f80fa2]{width:20px;height:20px;margin:0;padding:0}button .material-icons[data-v-67f80fa2]{line-height:20px;font-size:20px}.progress[data-v-67f80fa2]{height:4px;border-radius:0}",""])},"6qfW":function(t,e,a){(t.exports=a("I1BE")(!1)).push([t.i,"button[data-v-adf03508]{width:20px;height:20px;margin:0;padding:0}button .material-icons[data-v-adf03508]{line-height:20px;font-size:20px}.vue-dropzone .table *[data-v-adf03508]{cursor:auto}.vue-dropzone .table a[data-v-adf03508],.vue-dropzone .table button.btn[data-v-adf03508],.vue-dropzone .table button.btn i[data-v-adf03508]{cursor:pointer}.table thead tr th[data-v-adf03508]{color:rgba(0,0,0,.57);font-weight:500}.table tbody tr td[data-v-adf03508]{color:rgba(0,0,0,.54);font-weight:400}.table tbody tr td.file-name[data-v-adf03508],.table tbody tr td a[data-v-adf03508]{color:#202124}.table tbody tr td a[data-v-adf03508]:hover{text-decoration:underline}.table tbody tr td[data-v-adf03508],.table thead tr th[data-v-adf03508]{font-size:13px}.table td>div[data-v-adf03508],.table th>div[data-v-adf03508]{position:relative}.progress[data-v-adf03508]{height:4px;border-radius:0}",""])},"8wBL":function(t,e,a){var i=a("QnCX");"string"==typeof i&&(i=[[t.i,i,""]]);var s={hmr:!0,transform:void 0,insertInto:void 0};a("aET+")(i,s);i.locals&&(t.exports=i.locals)},Dqre:function(t,e,a){"use strict";a("FNk8");var i=a("ksP6"),s=a.n(i),r={name:"AttachmentList",props:{tmpAttachments:{type:Array,default:function(){return[]}},attachments:{type:Array},modelId:{type:Number,default:0}},methods:{checkProgress:function(t){return this.tableKey+=1,null!==t.progress},isCanceledOrError:function(t){return"canceled"===t.status||"error"===t.status},isUploading:function(t){return"canceled"===t.status||"error"===t.status||"success"===t.status},removeTmpFile:function(t){this.$emit("tmp-file-removed",t)},filesize:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(0===t)return"0 Bytes";var a=1e3,i=e<0?0:e,s=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],r=Math.floor(Math.log(t)/Math.log(a));return parseFloat((t/Math.pow(a,r)).toFixed(i))+" "+s[r]}}},o=(a("yZqC"),a("KHd+")),n=Object(o.a)(r,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"attachment-list-container",on:{click:function(t){t.stopPropagation()}}},[e("table",{staticClass:"table table-hover"},[t._m(0),t._v(" "),e("tbody",[t._l(t.attachments,(function(a){return[a.wasRecentlyCreated?t._e():e("tr",{key:a.id},[e("td",{staticClass:"font-weight-bold"},[e("a",{attrs:{href:a.url,target:"_blank"}},[t._v("\n              "+t._s(a.file_name)+"\n            ")])]),t._v(" "),e("td",{attrs:{width:"415"}},[t._v("â€”")]),t._v(" "),e("td",{attrs:{width:"140"}},[t._v(t._s(t.filesize(a.size)))]),t._v(" "),e("td",{attrs:{width:"36"}},[e("button",{staticClass:"btn btn-round btn-link text-rose",attrs:{type:"button"},on:{click:function(e){return t.$emit("file-removed",a)}}},[e("i",{staticClass:"material-icons"},[t._v("\n                delete\n              ")])])])])]})),t._v(" "),t._l(t.tmpAttachments,(function(a){return e("tr",{key:a.uuid},[e("td",{staticClass:"font-weight-bold file-name"},[t._v(t._s(a.file_name))]),t._v(" "),e("td",{attrs:{width:"415"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.checkProgress(a)&&!t.isCanceledOrError(a.o),expression:"checkProgress(file) && !isCanceledOrError(file.o)"}],staticClass:"progress"},[e("div",{staticClass:"progress-bar progress-bar-striped",class:{"progress-bar-animated":a.progress<100,"bg-success":100==a.progress},style:{width:a.progress+"%"},attrs:{role:"progressbar","aria-valuenow":a.progress,"aria-valuemin":"0","aria-valuemax":"100"}})]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:!t.checkProgress(a)&&!t.isCanceledOrError(a.o),expression:"!checkProgress(file) && !isCanceledOrError(file.o)"}],staticClass:"text-capitalize"},[t._v("\n            "+t._s(a.o.status)+"\n          ")]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:a.errorMsg,expression:"file.errorMsg"}],staticClass:"text-danger"},[t._v("\n            "+t._s(a.errorMsg)+"\n          ")])]),t._v(" "),e("td",{attrs:{width:"140"}},[t._v(t._s(t.filesize(a.size)))]),t._v(" "),e("td",{attrs:{width:"36"}},[e("button",{staticClass:"btn btn-round btn-link text-rose",attrs:{type:"button"},on:{click:function(e){return t.removeTmpFile(a)}}},[e("i",{directives:[{name:"show",rawName:"v-show",value:t.isUploading(a.o),expression:"isUploading(file.o)"}],staticClass:"material-icons",attrs:{title:"Remove"}},[t._v("\n              delete\n            ")]),t._v(" "),e("i",{directives:[{name:"show",rawName:"v-show",value:!t.isUploading(a.o),expression:"!isUploading(file.o)"}],staticClass:"material-icons",attrs:{title:"Cancel"}},[t._v("\n              close\n            ")])])])])}))],2)])])}),[function(){var t=this._self._c;return t("thead",[t("tr",[t("th",[this._v("Name")]),this._v(" "),t("th",{attrs:{width:"415"}},[this._v("Status")]),this._v(" "),t("th",{attrs:{width:"140"}},[this._v("File size")]),this._v(" "),t("th",{attrs:{width:"36"}})])])}],!1,null,"adf03508",null).exports,l={name:"AttachmentPictures",props:{tmpAttachments:{type:Array,default:function(){return[]}},attachments:{type:Array},modelId:{type:Number,default:0}},methods:{checkProgress:function(t){return this.tableKey+=1,null!==t.progress},isCanceledOrError:function(t){return"canceled"===t.status||"error"===t.status},isUploading:function(t){return"canceled"===t.status||"error"===t.status||"success"===t.status},removeTmpFile:function(t){this.$emit("tmp-file-removed",t)},filesize:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(0===t)return"0 Bytes";var a=1e3,i=e<0?0:e,s=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],r=Math.floor(Math.log(t)/Math.log(a));return parseFloat((t/Math.pow(a,r)).toFixed(i))+" "+s[r]}}},d=(a("Wam2"),Object(o.a)(l,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"attachment-list-container d-flex flex-wrap flex-gap pt-3",on:{click:function(t){t.stopPropagation()}}},[t._l(t.attachments,(function(a){return[a.wasRecentlyCreated?t._e():e("div",{key:a.id,staticClass:"pic-preview"},[e("div",{staticClass:"pic-image"},[e("a",{attrs:{href:a.url,target:"_blank"}},[e("img",{attrs:{src:a.preview_thumbnail,alt:a.file_name,title:a.file_name}})])]),t._v(" "),e("div",{staticClass:"pic-details"},[e("input",{staticClass:"form-control file-name",attrs:{type:"text",disabled:""},domProps:{value:a.file_name}}),t._v(" "),e("div",{staticClass:"d-flex justify-content-between"},[e("span",{staticClass:"file-size"},[t._v(t._s(t.filesize(a.size)))]),t._v(" "),e("button",{staticClass:"btn btn-round btn-link text-rose",attrs:{type:"button"},on:{click:function(e){return t.$emit("file-removed",a)}}},[e("i",{staticClass:"material-icons"},[t._v("\n              delete\n            ")])])])])])]})),t._v(" "),t._l(t.tmpAttachments,(function(a){return e("div",{key:a.uuid,staticClass:"pic-preview"},[e("div",{staticClass:"pic-image"},[e("img",{key:a.uuid,attrs:{src:a.preview_thumbnail,alt:a.file_name,title:a.file_name}})]),t._v(" "),e("div",{staticClass:"pic-details"},[e("div",{staticClass:"file-status mt-1"},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.checkProgress(a)&&!t.isCanceledOrError(a.o),expression:"checkProgress(file) && !isCanceledOrError(file.o)"}],staticClass:"progress"},[e("div",{staticClass:"progress-bar progress-bar-striped",class:{"progress-bar-animated":a.progress<100,"bg-success":100==a.progress},style:{width:a.progress+"%"},attrs:{role:"progressbar","aria-valuenow":a.progress,"aria-valuemin":"0","aria-valuemax":"100"}})]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:!t.checkProgress(a)&&!t.isCanceledOrError(a.o),expression:"!checkProgress(file) && !isCanceledOrError(file.o)"}],staticClass:"text-capitalize"},[t._v("\n          "+t._s(a.o.status)+"\n        ")]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:a.errorMsg,expression:"file.errorMsg"}],staticClass:"text-danger"},[t._v("\n          "+t._s(a.errorMsg)+"\n        ")])]),t._v(" "),e("input",{staticClass:"form-control file-name",attrs:{type:"text",disabled:""},domProps:{value:a.file_name}}),t._v(" "),e("div",{staticClass:"d-flex justify-content-between"},[e("span",{staticClass:"file-size"},[t._v(t._s(t.filesize(a.size)))]),t._v(" "),e("button",{staticClass:"btn btn-round btn-link text-rose",attrs:{type:"button"},on:{click:function(e){return t.removeTmpFile(a)}}},[e("i",{directives:[{name:"show",rawName:"v-show",value:t.isUploading(a.o),expression:"isUploading(file.o)"}],staticClass:"material-icons",attrs:{title:"Remove"}},[t._v("\n            delete\n          ")]),t._v(" "),e("i",{directives:[{name:"show",rawName:"v-show",value:!t.isUploading(a.o),expression:"!isUploading(file.o)"}],staticClass:"material-icons",attrs:{title:"Cancel"}},[t._v("\n            close\n          ")])])])])])}))],2)}),[],!1,null,"67f80fa2",null).exports),c={components:{vueDropzone:s.a,AttachmentList:n,AttachmentPictures:d},props:{accept:{type:String,default:null},component:{type:String,default:"list",validator:function(t){return-1!==["list","pictures"].indexOf(t)}},route:{type:String,required:!0},maxFiles:{type:Number,default:null},maxFileSize:{type:Number,default:2},collectionName:{type:String,required:!0},media:{type:Array,default:function(){return[]}},modelId:{type:[String,Number],default:0}},data:function(){return{hasFiles:!1,childKey:1,tmpAttachments:[],options:{url:this.route,maxFiles:this.maxFiles,maxFilesize:this.maxFileSize,acceptedFiles:this.accept,thumbnailWidth:120,addRemoveLinks:!0,timeout:0,params:{size:this.maxFileSize,collection_name:this.collectionName,model_id:this.modelId},previewsContainer:".attachment-list-container",previewTemplate:'<div class="d-none"></div>',headers:{"X-XSRF-TOKEN":this.$getCookie("XSRF-TOKEN")}}}},computed:{uid:function(){return"dropzone-".concat(this._uid)},previewComponent:function(){return"attachment-".concat(this.component)}},watch:{tmpAttachments:{handler:function(){this.hasFiles=this.media.length+this.tmpAttachments.length},deep:!0},media:{handler:function(){if(this.hasFiles=this.media.length+this.tmpAttachments.length,null!==this.maxFiles){var t=this.$refs[this.uid],e=this.media.filter((function(t){return!0!==t.wasRecentlyCreated}));t.dropzone.options.maxFiles=this.maxFiles-e.length}},deep:!0}},methods:{addTmpFile:function(t){var e={};e.uuid=t.upload.uuid,e.id=null,e.file_name=t.name,e.size=t.size,e.progress=null,e.errorMsg=null,e.o=t,e.preview_thumbnail=null,this.tmpAttachments.push(e)},uploadProgress:function(t,e,a){this.tmpAttachments.map((function(a){a.uuid===t.upload.uuid&&(a.progress="".concat(Math.floor(e)))}))},success:function(t,e){var a=e;a.wasRecentlyCreated=!0,this.fileUploaded(a)},error:function(t,e,a){this.tmpAttachments.map((function(a){a.uuid===t.upload.uuid&&(a.errorMsg=e)}))},handleTmpFileRemoved:function(t){if(console.log(t),_.includes(["canceled","error"],t.o.status))this.removeTmpFile(t);else{if("uploading"!==t.o.status)return"success"===t.o.status?(this.removeTmpFile(t),this.fileRemoved(t),void this.$refs[this.uid].removeFile(t.o)):"queued"===t.o.status?(this.cancelQueuedFile(t),void this.$refs[this.uid].removeFile(t.o)):void 0;this.$refs[this.uid].removeFile(t.o)}},removeTmpFile:function(t){this.tmpAttachments=this.tmpAttachments.filter((function(e){return e.uuid!==t.o.upload.uuid}))},cancelQueuedFile:function(t){this.tmpAttachments.map((function(e){e.uuid===t.o.upload.uuid&&(e.o.status="canceled",e.errorMsg="Upload canceled.")}))},updateDataUrl:function(t,e){this.tmpAttachments.map((function(a){a.uuid===t.upload.uuid&&(a.preview_thumbnail=e)}))},fileRemoved:function(t){this.$emit("file-removed",t)},fileUploaded:function(t){this.$emit("file-uploaded",t)}}},u=(a("T35h"),Object(o.a)(c,(function(){var t=this,e=t._self._c;return e("div",[e("vue-dropzone",{ref:t.uid,attrs:{id:t.uid,options:t.options,"use-custom-slot":!0},on:{"vdropzone-file-added":t.addTmpFile,"vdropzone-upload-progress":t.uploadProgress,"vdropzone-success":t.success,"vdropzone-error":t.error,"vdropzone-thumbnail":t.updateDataUrl}},[e("div",{directives:[{name:"show",rawName:"v-show",value:!t.hasFiles,expression:"!hasFiles"}],staticClass:"dropzone-container"},[e("div",{staticClass:"file-selector"},[e("button",{staticClass:"btn btn-azure",attrs:{type:"button"}},[t._v("\n          Browse\n        ")])])]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.hasFiles,expression:"hasFiles"}],staticClass:"file-preview-container"},[e("button",{staticClass:"btn btn-azure",attrs:{type:"button"}},[t._v("\n        Browse\n      ")]),t._v(" "),e(t.previewComponent,{key:t.childKey,tag:"component",attrs:{"tmp-attachments":t.tmpAttachments,attachments:t.media},on:{"tmp-file-removed":t.handleTmpFileRemoved,"file-removed":t.fileRemoved}})],1)])],1)}),[],!1,null,"2d5bf2c5",null));e.a=u.exports},QnCX:function(t,e,a){(t.exports=a("I1BE")(!1)).push([t.i,'.separator[data-v-2d5bf2c5]{position:relative;width:130px;margin:0 auto 16px}.separator[data-v-2d5bf2c5]:before{left:0}.separator[data-v-2d5bf2c5]:after,.separator[data-v-2d5bf2c5]:before{position:absolute;content:"";height:1px;width:100px;background:#d8d8d8;top:50%;transform:translate(-50%,-50%)}.separator[data-v-2d5bf2c5]:after{left:130px}.file-preview-container[data-v-2d5bf2c5]{text-align:left}.dropzone-container[data-v-2d5bf2c5]{margin:2em 0}',""])},T35h:function(t,e,a){"use strict";a("8wBL")},Wam2:function(t,e,a){"use strict";a("sr2p")},sr2p:function(t,e,a){var i=a("0/wV");"string"==typeof i&&(i=[[t.i,i,""]]);var s={hmr:!0,transform:void 0,insertInto:void 0};a("aET+")(i,s);i.locals&&(t.exports=i.locals)},yLki:function(t,e,a){var i=a("6qfW");"string"==typeof i&&(i=[[t.i,i,""]]);var s={hmr:!0,transform:void 0,insertInto:void 0};a("aET+")(i,s);i.locals&&(t.exports=i.locals)},yZqC:function(t,e,a){"use strict";a("yLki")}}]);